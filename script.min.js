"use strict";(function(){function e(){function e(e){"original"==e&&(document.documentElement.style.cssText="--main-bg-color0: #34495E;\n                        --main-bg-color1: #273240;\n                        --main-bg-color2: #18181B;\n                        --main-text-color0: white;\n                        --main-text-color2: #bdc2c4;\n                        --main-color0: #161c22;\n                        --main-color2: #39c0d2;\n                        --main-color3: #47e9ff;\n                        --main-button-ratio-color:#39c0d2;\n                        --main-button-color:#39c0d2;\n                        --main-button-text-color:var(--main-color0);\n                        --main-background-transparent-1:#18181bbd;\n                        --main-bg-title: var(--main-color2);\n                        --main-title-border: none; \n                        --main-box-shadow: 0 5px 5px var(--main-bg-color2);"),"dark"==e&&(document.documentElement.style.cssText="--main-bg-color0: #0E0E10;\n                        --main-bg-color1: #18181B;\n                        --main-bg-color2: #1F1F23;\n                        --main-text-color0: white;\n                        --main-text-color2: #6c6c6c;\n                        --main-color0: #161c22;\n                        --main-color2: #9147FF;\n                        --main-color3: #772CE8;\n                        --main-button-ratio-color:#a970ff;\n                        --main-button-color:#9147FF;\n                        --main-button-text-color:var(--main-text-color0);\n                        --main-background-transparent-1:#35353bbd;\n                        --main-bg-title: var(--main-bg-color1);\n                        --main-title-border: 1px solid var(--main-text-color2);\n                        --main-box-shadow: 0 5px 5px var(--main-bg-color1);")}if(console.log("%cHello ! Enjoy Highlighted Chat ðŸ˜ƒ\n ðŸŒ¸ðŸŒ¸ðŸŒ¸ðŸŒ¸ðŸŒ¸","background: #222; color: #FFF; font-size: 20px;"),document.getElementById("notCoChannelInputSubmit").addEventListener("click",function(){document.getElementById("notCoChannelInput").value&&(window.location.href=`./?channel=${document.getElementById("notCoChannelInput").value.toLowerCase()}`)},{passive:!0}),document.getElementById("notCoChannelInput").focus(),document.getElementById("notCoChannelInput").addEventListener("keydown",e=>{e.repeat||"Enter"==e.key&&document.getElementById("notCoChannelInputSubmit").click()}),document.getElementById("backToHomeButton").addEventListener("click",function(){ComfyJS.Disconnect(),window.location.href="./"},{passive:!0}),document.getElementById("onlyHighlightedCheck").addEventListener("input",function(){document.getElementById("onlyHighlightedCheck").checked?(d=!0,l('[data-type="normal"]')):d=!1}),document.getElementById("highlightedNotifSound").addEventListener("input",function(){u=!!document.getElementById("highlightedNotifSound").checked}),document.getElementById("enableModCommand").addEventListener("input",function(){p=!!document.getElementById("enableModCommand").checked}),null!=sessionStorage.getItem(`${r}theme`)&&(document.querySelector(`#choiceTheme input[value="${sessionStorage.getItem(`${r}theme`)}"]`).checked=!0,e(sessionStorage.getItem(`${r}theme`))),document.querySelectorAll("#choiceTheme input").forEach(function(t){t.addEventListener("input",function(){t.checked?(sessionStorage.setItem(`${r}theme`,t.value),console.log("theme:",t.value),e(t.value)):console.log("false",t.value)})}),document.getElementById("hightlitedMessageChatContainer").addEventListener("click",function(){document.getElementById("headerBurger").classList.remove("menuVisible"),document.getElementById("headerNav").classList.remove("menuVisible")}),document.getElementById("headerBurger").addEventListener("click",function(){this.classList.toggle("menuVisible"),document.getElementById("headerNav").classList.toggle("menuVisible")}),document.getElementById("chatGoToBottom").addEventListener("click",function(){let e=document.getElementById("hightlitedMessageChatContainer");e.scrollTop=e.scrollHeight,i("#chatGoToBottom"),m=!0},{passive:!0}),console.log(location.search.substr(1)),"channel"==location.search.substr(1).split("=")[0]&&(c=location.search.substr(1).split("=")[1].toLowerCase(),c)){ComfyJS.Init(c);let e=document.querySelector(".titleChat p");e.innerHTML=e.textContent+'<span translate="no">'+c+"</span>",fetch(`https://decapi.me/twitch/avatar/${c}`).then(function(e){return e.text()}).then(function(e){let t=document.createElement("div"),n=document.createElement("a");n.href=`https://twitch.tv/${c}`,n.target="_blank";let o=document.createElement("img");o.src=e,o.id="channelProfilePicturePic",o.alt="profile picture",t.appendChild(n),n.appendChild(o),document.querySelector(".titleChat").insertBefore(t,document.querySelector(".titleChat p"))}),"ponce"==c&&(e.textContent="ðŸŒ¸ "+e.textContent+" ðŸŒ¸"),document.title=`${c} - Twitch Highlighted Chat`,t(),ComfyJS.onConnected=((e,t,o)=>{if(n(`Chat of <i>${c.toUpperCase()}</i>`),g&&null!=sessionStorage.getItem(`${r}messagesSave-${c}`)){let e=JSON.parse(sessionStorage.getItem(`${r}messagesSave-${c}`));e.forEach(function(e){e.isRead?a(e.user,e.message,e.flags,e.self,e.extra,!0).setAttribute("read",""):a(e.user,e.message,e.flags,e.self,e.extra,!0)})}}),ComfyJS.onChat=((e,t,n,i,s)=>{d||a(e,t,n,i,s),1==n.highlighted&&(d&&a(e,t,n,i,s),g&&o(e,t,n,i,s))}),ComfyJS.onCommand=((e,t,n,i,s)=>{if(p&&"+hmsg"===t&&(i.broadcaster||i.mod||"quentinperou"==e.toLowerCase()))if(i.highlighted)a(e,"!"+t+" "+n,i,!1,s),o(e,"!"+t+" "+n,i,!1,s);else{let t=a(e,n,i,!1,s,!1);t.style.backgroundColor="var(--main-bg-color0)",t.style.padding="2px 5px"}else d?i.highlighted&&a(e,"!"+t+" "+n,i,!1,s):a(e,"!"+t+" "+n,i,!1,s)}),ComfyJS.onError=(e=>{console.log(e)})}document.getElementById("hightlitedMessageChatContainer").addEventListener("wheel",function(e){e.deltaY<0?this.clientHeight!=this.scrollHeight&&(m=!1,s("#chatGoToBottom")):e.deltaY>0&&this.scrollTop+this.clientHeight==this.scrollHeight&&(m=!0,i("#chatGoToBottom"))},{passive:!0})}function t(){s("#optionsDiv"),s(".divConnect"),i(".divNotConnect"),document.getElementById("headerBurger").classList.add("diplayOn")}function n(e){var t=Math.floor(Math.random()*Date.now());document.getElementById("notifContainer").innerHTML+=`<div class="oneNotifContainer hide"> <div id="notifNow${t}" class="notif"> <p class="notifTitle">${e}</p> </div></div>`,setTimeout(function(){document.getElementById(`notifNow${t}`).parentElement.classList.remove("hide")},10),setTimeout(function(){document.getElementById(`notifNow${t}`).parentElement.classList.add("hide"),setTimeout(function(){document.getElementById(`notifNow${t}`).parentElement.remove()},400)},2700)}function o(e,t,n,o,a){if(null==sessionStorage.getItem(`${r}messagesSave-${c}`)){let i={user:e,message:t,flags:n,self:o,extra:a,isRead:!1};sessionStorage.setItem(`${r}messagesSave-${c}`,JSON.stringify([i]))}else{let i={user:e,message:t,flags:n,self:o,extra:a,isRead:!1},s=JSON.parse(sessionStorage.getItem(`${r}messagesSave-${c}`));s.push(i),sessionStorage.setItem(`${r}messagesSave-${c}`,JSON.stringify(s))}}function a(e,t,n,o,a,i){null==i&&(i=!1);let s=a.id,l=t.toString(),d=new Date,g="0"+d.getHours(),p="0"+d.getMinutes();g=g.substr(-2),p=p.substr(-2);let f="";1==n.subscriber&&null!=a.userBadges.subscriber&&4==a.userBadges.subscriber.length&&(f=`(Tier ${a.userBadges.subscriber.match(/^[0-9]/g)[0]})`);let b=document.createElement("div");b.classList.add("chat-lineMessage");let E=document.createElement("div");if(E.classList.add("chat-lineNameDiv"),b.appendChild(E),E.innerHTML=`${n.mod?'<img src="img/mod.png" title="Moderator" class="chat-lineBadge">':""}\n                                    ${n.vip?'<img src="img/vip.png" title="VIP" class="chat-lineBadge">':""}\n                                    ${n.broadcaster?'<img src="img/broadcaster.png" title="Broadcaster" class="chat-lineBadge">':""}\n                                    ${n.subscriber?`<img src="img/sub.png" title="${a.userState["badge-info"].match(/[0-9]+$/g)}-Month Subscriber ${f}" class="chat-lineBadge">`:""}\n                                    <span class="chat-lineName" translate="no">${e}</span>`,!i){let e=document.createElement("span");e.classList.add("chat-messageTime"),e.textContent=`${g}:${p}`,E.prepend(e)}let v=document.createElement("span");v.classList.add("chat-messageSeparator"),v.textContent=": ",E.appendChild(v);let C=document.createElement("span");if(C.classList.add("chat-message"),C.setAttribute("translate","no"),1==n.highlighted){if(C.classList.add("chat-message-highlighted"),b.setAttribute("data-type","highlighted"),C.setAttribute("title","Click to mark as read"),C.addEventListener("click",function(){let e=JSON.parse(sessionStorage.getItem(`${r}messagesSave-${c}`)),t=e.findIndex(e=>e.extra.id==s);this.hasAttribute("read")?(this.removeAttribute("read"),e[t].isRead=!1):(this.setAttribute("read",""),e[t].isRead=!0),sessionStorage.setItem(`${r}messagesSave-${c}`,JSON.stringify(e))}),!i&&u){let e=new Audio("sound_notif2.aac");e.volume=.5,"ponce"==c&&(e=new Audio("sound_notif_ponce.aac"),e.volume=.7),e.play()}}else b.setAttribute("data-type","normal");let y=document.createElement("span");y.classList.add("messageFragment"),y.textContent=l,C.appendChild(y),b.appendChild(C),document.getElementById("hightlitedMessageChatContainer").appendChild(b);let I=document.getElementById("hightlitedMessageChatContainer");m&&(I.scrollTop=I.scrollHeight);let S=a.messageEmotes;if(console.log(S),null!=S){let e=[],t=y.textContent;console.log(t);let n=t;for(const[o,a]of Object.entries(S))for(const[i,s]of Object.entries(a)){let a=s.split("-"),i=t.substring(a[0],parseInt(a[1],10)+1);e.some(e=>e===i)||(e.push(i),n=n.replaceAll(i,`</span><img alt="${i}" title="${i}" class="chat-messageEmote" src="https://static-cdn.jtvnw.net/emoticons/v1/${o}/1.0"><span class="messageFragment">`))}C.innerHTML=n,C.classList.add("chat-message-withEmote")}if(h&&m)for(;document.querySelectorAll('.chat-lineMessage[data-type="normal"]').length>150;)document.querySelector('.chat-lineMessage[data-type="normal"]').remove();return C}function i(e){document.querySelectorAll(e).forEach(e=>e.hidden=!0)}function s(e){document.querySelectorAll(e).forEach(e=>e.hidden=!1)}function l(e){document.querySelectorAll(e).forEach(e=>e.remove())}let c;document.addEventListener("DOMContentLoaded",e);let r="HgltCt-",d=!0,m=!0,u=!1,g=!0,h=!0,p=!0})();